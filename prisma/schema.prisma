generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model FeatureFlag {
  id                String   @id @default(uuid())
  name              String
  description       String?
  enabled           Boolean  @default(false)
  environment       String
  rolloutPercentage Int      @default(0) // 0 to 100
  version           Int      @default(1)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model AuditLog {
  id          String   @id @default(uuid())
  action      String   // e.g., CREATE, UPDATE, DELETE
  flagId      String   // Associated Feature Flag ID
  flagName    String
  performedBy String
  details     String?  // JSON or text with additional info about the change
  createdAt   DateTime @default(now())
}

model PlaygroundFeatureFlag { // Keep the PascalCase model name for your code
  id                 String   @id @default(uuid())
  session_id         String
  flag_key           String
  enabled            Boolean  @default(false)
  rollout_percentage Int      @default(0)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@unique([session_id, flag_key])
  @@map("Playground")
}
